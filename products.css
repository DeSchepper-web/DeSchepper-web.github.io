/* ==========================
   PRODUCT PAGE â€” SCOPED (clean)
========================== */

/* A11y hide */
.product-page .sr-only{
  position:absolute; left:-9999px; top:auto; width:1px; height:1px;
  overflow:hidden; white-space:nowrap;
}

/* ---- Layout grid with areas ---- */
.product-page .grid{
  display:grid;
  grid-template-columns:
    clamp(240px, 20vw, 320px)      /* left details */
    minmax(520px, 1fr)             /* hero */
    clamp(280px, 22vw, 380px);     /* buy box */
  row-gap:2rem; column-gap:2rem;
  max-width:1200px;
  margin:calc(var(--nav-h,64px) + 1.5rem) auto 2.5rem;
  padding:0 1rem;
  grid-template-areas:
    ". header ."
    "left hero buybox"
    "bottom bottom bottom";
  align-items:start;
}
.product-page .center-col{ display:contents; }
.product-page .product-header{ grid-area:header; text-align:center; margin-bottom:.75rem; }
.product-page .left-col{ grid-area:left; align-self:start; }
.product-page .hero{ grid-area:hero; margin-top:0; }
.product-page .buybox{ grid-area:buybox; }
.product-page #reviews-bottom{ grid-area:bottom; }

@media (max-width:1024px){
  .product-page .grid{
    grid-template-columns:1fr;
    row-gap:1.25rem;
    grid-template-areas:
      "header"
      "hero"
      "buybox"
      "left"
      "bottom";
  }
}

/* ---- Side cards (details) ---- */
.product-page .card{
  background:#fff;
  border:1px solid #ccc;
  border-radius:8px;
  padding:1rem;
}
.product-page .bullets{ list-style:disc; padding-left:1.2rem; }
.product-page .bullets li{ margin:.5rem 0; }

/* ---- Header polish ---- */
.product-page .product-title{ font-size:2.4rem; line-height:1.15; }
.product-page .subtitle{ color:#666; }
.product-page .title-rule{
  border:0; border-top:3px solid var(--theme-a);
  width:72px; margin:.55rem auto 0; border-radius:3px;
}

/* ==========================
   GALLERY
========================== */
.product-page .hero{
  position:relative;
  margin:0 0 1rem;
  background:transparent;
  border-radius:0;           /* radius lives on frame */
  line-height:0;
  min-width:0;
  display:block !important;  /* ensure figure isn't a row */
  overflow:visible !important;
}
.product-page .hero-frame{
  position:relative;
  aspect-ratio:1/1;
  width:100%;
  overflow:hidden;           /* mask image + arrows */
  border-radius:12px;
  transform:translateZ(0);
  box-shadow:0 12px 28px rgba(0,0,0,.10);
  background:transparent;
}
.product-page #hero-img{
  position:absolute; inset:-0.5px;       /* 1px bleed to avoid seams */
  width:calc(100% + 1px); height:calc(100% + 1px);
  object-fit:cover; display:block; border:0; background:transparent;
}

/* Arrows */
.product-page .hero-nav{
  position:absolute; top:50%; transform:translateY(-50%);
  width:42px; height:42px; border:0; border-radius:999px;
  display:grid; place-items:center;
  background:rgba(0,0,0,.55); color:#fff; cursor:pointer;
  box-shadow:0 8px 18px rgba(0,0,0,.28);
  transition:background .2s, transform .08s;
}
.product-page .hero-nav:hover{ background:rgba(0,0,0,.75); }
.product-page .hero-nav:active{ transform:translateY(-50%) scale(.98); }
.product-page .hero-nav.prev{ left:.65rem; }
.product-page .hero-nav.next{ right:.65rem; }
.product-page .hero-nav svg{ width:22px; height:22px; fill:currentColor; }

@media (max-width:768px){
  .product-page .hero-nav{ width:48px; height:48px; }
}

/* Dots (below image) */
.product-page .hero-dots{
  position:static !important;
  display:flex; justify-content:center; align-items:center;
  gap:.5rem; margin-top:.6rem; padding:0; line-height:1;
}
.product-page .hero-dots button{
  width:12px; height:12px; border-radius:50%; border:0;
  background:#cfcfcf; cursor:pointer;
  transition:background .2s ease, transform .2s ease;
  appearance:none; -webkit-appearance:none;
}
.product-page .hero-dots button:hover{ background:#999; }
.product-page .hero-dots button[aria-selected="true"]{
  background:var(--theme-a); transform:scale(1.25);
}
.product-page .hero-dots button:focus-visible{
  outline:2px solid var(--theme-a); outline-offset:2px;
}
@media (pointer:coarse){
  .product-page .hero-dots button{ width:16px; height:16px; }
}

/* ==========================
   BUYBOX (flat + consistent)
========================== */
.product-page .buybox{
  display:grid;
  grid-template-columns:1fr 1fr;
  grid-template-areas:
    "price cta"
    "variant qty";
  gap:.85rem;
  align-items:center; justify-items:stretch; text-align:left;
  background:#fff; border:1px solid #ccc; border-radius:8px;
  padding:1rem; box-shadow:none;
  max-width:820px; margin:0 auto 2.25rem;
  align-self:start;
}

/* Areas */
.product-page .price-wrap{ grid-area:price; justify-self:center; text-align:center; width:100%; }
.product-page .buy-actions{ grid-area:cta; margin:0; display:flex; }
.product-page .variant-wrap{ grid-area:variant; }
.product-page .qty-control{ grid-area:qty; display:flex; }

/* Text bits */
.product-page .buybox .price{
  font-family:'Reckless Neue', serif !important;
  font-size:1.5rem; font-weight:700; color:var(--theme-b); line-height:1.2;
}
.product-page .buybox .meta{ color:#666; font-size:.95rem; }

/* Controls (select/input) */
.product-page .select,
.product-page .input{
  padding:.65rem .9rem;
  border:1px solid #ccc; border-radius:6px;
  font:inherit; height:44px; color:#000; background:#fff;
}
.product-page .variant-wrap .select,
.product-page .buy-actions .cta{ width:100%; }

/* Orange highlight ONLY on select */
.product-page .select:hover,
.product-page .select:focus{
  border-color:var(--theme-a);
  box-shadow:0 0 0 2px var(--theme-a, orange);
  outline:none;
}

/* CTA button */
.product-page .buy-actions .cta{
  background:var(--theme-a);
  border:1px solid var(--btn-border);
  border-radius:6px;
  color:#fff; font-weight:700; font-size:1rem;
  padding:.65rem 1rem; min-height:44px;
  box-shadow:none; transition:background .2s ease; cursor:pointer;
  display:inline-flex; align-items:center; justify-content:center;
  white-space:nowrap; line-height:1; height:44px; min-width:0;
}
.product-page .buy-actions .cta:hover,
.product-page .buy-actions .cta:active{ background:var(--theme-a-dark); }

/* Keep Add to Cart + Qty control equal width */
.product-page .buy-actions,
.product-page .qty-control{ display:flex; justify-content:stretch; }
.product-page .buy-actions .cta,
.product-page .qty-control{ width:100%; min-width:0; }

/* ==========================
   QTY CONTROL (glyph buttons)
========================== */
.product-page .qty-control{
  justify-self:stretch; width:100%; min-width:0;
  display:grid; grid-template-columns:var(--qty-btn-w,40px) 1fr var(--qty-btn-w,40px);
  align-items:stretch;
  border:1px solid #ccc; border-radius:6px; background:#fff;
  overflow:visible; padding:0; box-shadow:none; box-sizing:border-box; height:44px;
}
.product-page .qty-btn,
.product-page .qty-control .qty{
  border:0 !important; background:transparent; height:44px;
  margin:0; padding:0; line-height:1; font:inherit;
}
.product-page .qty-control .qty{
  width:100% !important; min-width:0 !important; text-align:center;
  font-family:'Reckless Neue', serif !important;
  font-weight:400; font-size:1.15rem; font-variant-numeric:lining-nums tabular-nums;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  display:flex; align-items:center; justify-content:center;
  appearance:textfield; -moz-appearance:textfield;
}
.product-page .qty-control .qty::-webkit-outer-spin-button,
.product-page .qty-control .qty::-webkit-inner-spin-button{ -webkit-appearance:none; margin:0; }

.product-page .qty-btn{
  width:var(--qty-btn-w,40px); min-width:var(--qty-btn-w,40px);
  display:inline-flex; align-items:center; justify-content:center; cursor:pointer;
  font-family:'Reckless Neue', serif !important; font-weight:600; font-size:1.25rem; color:#333;
  position:relative; box-sizing:border-box; z-index:0;
}
.product-page .qty-btn:first-child{ border-right:1px solid #e6e6e6; border-radius:6px 0 0 6px; }
.product-page .qty-btn:last-child { border-left: 1px solid #e6e6e6; border-radius:0 6px 6px 0; }

.product-page .qty-control:hover,
.product-page .qty-control:focus-within{
  border-color:var(--theme-a); box-shadow:0 0 0 2px var(--theme-a); position:relative; z-index:2;
}
.product-page .qty-btn:hover::before{
  content:""; position:absolute; inset:5px 4px 6px 4px; background:#ccc; border-radius:4px; pointer-events:none; z-index:-1;
}
.product-page .qty-btn:focus-visible,
.product-page .qty-control .qty:focus,
.product-page .qty-control .qty:focus-visible{ outline:none; box-shadow:none; }

/* Mobile tweaks */
@media (max-width:768px){
  .product-page .buybox{
    grid-template-columns:1fr 1fr;
    grid-template-areas:"price cta" "variant qty";
    max-width:100%; margin:0 auto 1.25rem;
  }
  .product-page .variant-wrap .select,
  .product-page .buy-actions .cta,
  .product-page .qty-control{ height:48px; }
  :root{ --qty-btn-w:44px; }
}

/* ===== Buybox info (full-width) ===== */
.product-page .buybox .buy-info{
  grid-column:1/-1;
  border-top:1px solid #e6e6e6;
  margin-top:1rem; padding-top:1rem;
  font-size:.95rem; color:#333;
}
.product-page .buybox .buy-info ul{ list-style:none; padding:0; margin:0; }
.product-page .buybox .buy-info li{ margin-bottom:.75rem; line-height:1.45; }
.product-page .buybox .buy-info li:last-child{ margin-bottom:0; }

/* ==========================
   REVIEWS (final single source of truth)
========================== */
.reviews-panel{
  background:#fff;
  border:1px solid #ddd;
  border-radius:12px;
  padding:1.25rem 1.25rem 1rem;
  width:100%; max-width:100%; margin:0 auto;
}
.reviews-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:1rem;
  margin-bottom:.25rem;
}
.reviews-title{
  font-size:1.25rem;
  line-height:1.2;
  margin:0;
  display:flex;
  align-items:center;
  gap:.5rem;
}
.reviews-title .stars{
  font-size:1.05em;
  letter-spacing:.05em;
  color:#F7931A;
}
.review-cta{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  height:44px;
  padding:.65rem 1rem;
  border:1px solid var(--btn-border, #2c2828);
  border-radius:6px;
  background:var(--theme-a, #F7931A);
  color:#fff;
  font-weight:700;
  font-size:1rem;
  text-decoration:none;
  line-height:1;
  white-space:nowrap;
  box-shadow:none;
  transition:background .2s ease, border-color .2s ease, transform .06s ease;
}
.review-cta:hover,
.review-cta:active{
  background:var(--theme-a-dark, #C46D13);
  border-color:var(--btn-border, #2c2828);
}
.review-cta:active{ transform:translateY(1px); }
.review-cta:focus-visible{
  outline:2px solid var(--theme-a, #F7931A);
  outline-offset:2px;
}
.reviews-meta{
  margin:.25rem 0 .75rem;
  color:#555;
  font-size:.95rem;
}

/* Cards grid */
.reviews-grid{ display:grid; grid-template-columns:repeat(12,1fr); gap:1rem; }
.review-card{
  grid-column:span 12; background:#fff; border:1px solid #e6e6e6; border-radius:10px;
  padding:1rem; box-shadow:0 1px 0 rgba(0,0,0,.03);
}
@media (min-width:720px){
  .review-card{ grid-column:span 6; }
}
@media (min-width:1040px){
  .review-card{ grid-column:span 4; }
}
.review-head{ display:flex; justify-content:space-between; align-items:center; gap:.75rem; margin-bottom:.5rem; }
.reviewer{ margin:0; font-size:1.05rem; }
.review-stars{ color:#F7931A; letter-spacing:.05em; font-size:1.05rem; }
.review-text{ margin:.25rem 0 .75rem; color:#222; line-height:1.55; }
.review-media{ display:flex; gap:.5rem; flex-wrap:wrap; }
.review-media .thumb{
  padding:0; margin:0; background:#f7f7f7; border:1px solid #e6e6e6; border-radius:8px;
  width:72px; height:72px; overflow:hidden; cursor:pointer; line-height:0;
}
.review-media .thumb img{ width:100%; height:100%; object-fit:cover; display:block; }
.review-media .thumb:hover{ outline:2px solid #F7931A; }

/* Lightbox for review images */
.rv-lightbox{
  position:fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,.86);
  z-index:9999; padding:2rem;
}
.rv-lightbox.open{ display:grid; }
.rv-close{
  position:absolute; top:12px; right:12px; width:40px; height:40px; border-radius:50%;
  border:0; background:rgba(255,255,255,.9); font-size:26px; line-height:0; cursor:pointer;
}
#rv-image{
  max-width:min(92vw,1200px); max-height:82vh; object-fit:contain; cursor:zoom-in;
  transition: transform .2s ease;
}
#rv-image.zoomed{ cursor:zoom-out; transform:scale(1.6); }
.rv-hint{
  position:absolute; bottom:16px; left:50%; transform:translateX(-50%);
  color:#fff; font-size:.9rem; opacity:.85;
}

/* --- Mobile: Reviews title, rating line, then CTA (no HTML changes) --- */
@media (max-width:560px){
  .reviews-panel{
    display:grid;
    grid-template-columns:1fr;
    grid-template-areas:
      "title"
      "meta"
      "cta";
    grid-row-gap:.5rem;
  }
  .reviews-header{ display:contents !important; } /* flatten wrapper */
  .reviews-title{ grid-area:title; }
  .reviews-meta { grid-area:meta;  margin:.15rem 0 .25rem; }
  .review-cta  { grid-area:cta;   width:100%; }
}

/* ==========================
   FULLSCREEN LIGHTBOX (gallery)
========================== */
#lightbox{
  position:fixed; inset:0; background:rgba(0,0,0,.92);
  display:grid; place-items:center;
  opacity:0; visibility:hidden; transition:opacity .2s ease, visibility .2s ease;
  z-index:10000;
}
#lightbox[aria-hidden="false"]{ opacity:1; visibility:visible; }
#lightbox-img{
  max-width:92vw; max-height:90vh; object-fit:contain; display:block;
  border-radius:10px; box-shadow:0 16px 36px rgba(0,0,0,.6);
}

/* ===== Minimal theme overrides ===== */
.product-page .buybar{ display:none !important; }
.product-page .hero{ align-self:start !important; margin-top:0 !important; padding-top:0 !important; min-height:0 !important; background:transparent !important; }
.product-page .hero::before{ content:none !important; }

/* ===== Optional: keep details + buybox same width ===== */
@media (min-width:1025px){
  .product-page .left-col .card,
  .product-page .buybox{ width:100%; max-width:380px; }
}
@media (max-width:1024px){
  .product-page .left-col .card,
  .product-page .buybox{ max-width:100%; }
}

/* Product header subtitle underline */
.product-header .subtitle{
  display:inline-block; position:relative;
  font-family:'Satoshi',sans-serif; font-size:1.1rem; color:#555;
  margin:.5rem 0 0; text-align:center;
}
.product-header .subtitle::after{
  content:""; display:block; height:3px; background:var(--theme-a);
  margin:.4rem auto 0; width:100%; border-radius:2px;
}
